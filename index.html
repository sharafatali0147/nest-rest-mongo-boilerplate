<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>nest-mongoose-boilerplate documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
	      <link rel="stylesheet" href="./styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="./" class="navbar-brand">nest-mongoose-boilerplate documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content getting-started">
                   <div class="content-data">

<p align="center">
  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo_text.svg" width="320" alt="Nest Logo" /></a>
</p>

  <p align="center">A progressive <a href="http://nodejs.org" target="blank">Node.js</a> framework for building efficient and scalable server-side applications, heavily inspired by <a href="https://angular.io" target="blank">Angular</a>.</p>
    <p align="center">
<a href="https://www.npmjs.com/~nestjscore"><img src="https://img.shields.io/npm/v/@nestjs/core.svg" alt="NPM Version" /></a>
<a href="https://www.npmjs.com/~nestjscore"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
<a href="https://travis-ci.org/msanvarov/nest-rest-mongo-boilerplate"><img src="https://travis-ci.org/msanvarov/nest-rest-mongo-boilerplate.svg?branch=master" alt="Travis" /></a>
<a href="https://paypal.me/kamilmysliwiec"><img src="https://img.shields.io/badge/Donate-PayPal-dc3d53.svg"/></a>
<a href="https://twitter.com/nestframework"><img src="https://img.shields.io/twitter/follow/nestframework.svg?style=social&label=Follow"></a>
</p>
  <!--[![Backers on Open Collective](https://opencollective.com/nest/backers/badge.svg)](https://opencollective.com/nest#backer)
  [![Sponsors on Open Collective](https://opencollective.com/nest/sponsors/badge.svg)](https://opencollective.com/nest#sponsor)-->

<h3 id="üìö-description">üìö Description</h3>
<p>This boilerplate is made to quickly prototype backend applications. It comes with database, logging, security, and authentication features out of the box.</p>
<hr>
<h3 id="üõ†Ô∏è-prerequisites">üõ†Ô∏è Prerequisites</h3>
<h4 id="non-docker">Non Docker</h4>
<ul>
<li>Please make sure to have MongoDB locally, or utilize Mongo on the cloud by configuration a cluster in <a href="https://www.mongodb.com/cloud/atlas">atlas</a>. Then grab the connection string and modify the following <a href="https://github.com/msanvarov/nest-rest-mongo-boilerplate/blob/master/.env.example#L10">line</a>.</li>
</ul>
<h4 id="docker-üê≥">Docker üê≥</h4>
<ul>
<li>Please make sure to have docker desktop setup on any preferred operating system to quickly compose both the MongoDB and web application. Then follow the steps outlined below.</li>
</ul>
<hr>
<h3 id="üöÄ-deployment">üöÄ Deployment</h3>
<h4 id="manual-deployment-without-docker">Manual Deployment without Docker</h4>
<ul>
<li><p>Create a .env file using the <code>cp .env.example .env</code> command and replace the existing env variables with personal settings (MongoDB URL either srv or localhost)</p>
</li>
<li><p>Install dependencies using <code>npm i</code> or <code>yarn</code></p>
</li>
<li><p>Start the app for pre-production using <code>npm run start</code> or for development using <code>npm run start:dev</code> (the app will be exposed on the port 9000; not to conflict with React, Angular, or Vue)</p>
</li>
</ul>
<h4 id="deploying-with-docker-üê≥">Deploying with Docker üê≥</h4>
<ul>
<li>Execute the following command in-app directory:</li>
</ul>
<div><pre class="line-numbers"><code class="language-bash"># creates and loads the docker container with required configuration
$ docker-compose up -d </code></pre></div><ul>
<li>The following command will set up the project for you (building the Docker images, starting docker-compose stack). The Web application and mongo will be exposed to <a href="http://localhost:9000">http://localhost:9000</a> and <a href="http://localhost:27017">http://localhost:27017</a> respectively</li>
</ul>
<h3 id="üîí-environment-configuration">üîí Environment Configuration</h3>
<p>By default, the application comes with a config module that can inject the ConfigService and read every environment variable from the .env. file.</p>
<p><strong>APP_ENV</strong> - the application environment it will be executing as, either in development or production. Determines the type of logging options to utilize. Options: <code>dev</code> or <code>prod</code>. </p>
<p><strong>APP_URL</strong> - the base URL for the application. Made mainly to showcase the <code>ConfigService</code> and can be removed if not used.</p>
<p><strong>WEBTOKEN_SECRET_KEY</strong> - the secret key to encrypt/decrypt web tokens with. Make sure to generate a random alphanumeric string for this. Not </p>
<p><strong>WEBTOKEN_EXPIRATION_TIME</strong> - <strong>the time in seconds</strong> indicating when the web token will expire; by default, it&#39;s 2400 seconds which is 40 mins.</p>
<p><strong>DB_URL</strong> - the URL to the MongoDB collection</p>
<hr>
<h3 id="üèó-choosing-a-web-framework">üèó Choosing a Web Framework</h3>
<p>This boilerplate comes with <a href="https://github.com/fastify/fastify">Fastify</a> out of the box as it offers <a href="https://github.com/nestjs/nest/blob/master/benchmarks/all_output.txt">performance benefits</a> over Express. But this can be changed to use <a href="https://expressjs.com/">Express</a> framework instead of Fastify. Please proceed the steps below to change between the two.</p>
<ul>
<li>Replace the following lines of code in the <a href="https://github.com/msanvarov/nest-rest-mongo-boilerplate/blob/master/src/main.ts">main.ts file</a> with the ones detailed below.</li>
</ul>
<div><pre class="line-numbers"><code class="language-ts">// from (fastify):
import {
  FastifyAdapter,
  NestFastifyApplication,
} from &#39;&#64;nestjs/platform-fastify&#39;;
import * as headers from &#39;fastify-helmet&#39;;
import * as fastifyRateLimiter from &#39;fastify-rate-limit&#39;;
const app = await NestFactory.create&lt;NestFastifyApplication&gt;(
  AppModule,
  new FastifyAdapter({ logger: console }),
);
app.register(headers);
app.register(fastifyRateLimiter, {
  max: 100,
  timeWindow: &#39;1 minute&#39;,
});

// to (express):
import * as headers from &#39;helmet&#39;;
import * as rateLimiter from &#39;express-rate-limit&#39;;
const app = await NestFactory.create(AppModule, {
  logger: console,
});
app.use(headers());
app.use(
  rateLimiter({
    windowMs: 60, // 1 minutes
    max: 100, // limit each IP to 100 requests per windowMs
  }),
);</code></pre></div><p><strong>Note</strong>: The <code>package.json</code>comes with dependencies for both Express and Fastify to support moving between two. But this can leave the project bloated especially when only one web framework is being used. Thus it is recommended that when deploying to production, a purger of unused dependencies occurs. </p>
<p>If you choose to <strong>use Fastify</strong>, this command will <strong>purge all of the Express dependencies</strong>:</p>
<div><pre class="line-numbers"><code class="language-bash"># removing Express dependencies
$ npm rm &#64;nestjs/platform-express express-rate-limit helmet swagger-ui-express &#64;types/express --save</code></pre></div><p>If you choose to <strong>use Express</strong>, this command will <strong>purge all of the Fastify dependencies</strong>:</p>
<div><pre class="line-numbers"><code class="language-bash"># removing Fastify dependencies
$ npm rm &#64;nestjs/platform-fastify fastify-helmet fastify-rate-limit fastify-swagger --save</code></pre></div><hr>
<h3 id="‚úÖ-testing">‚úÖ Testing</h3>
<h4 id="docker-üê≥-1">Docker üê≥</h4>
<div><pre class="line-numbers"><code class="language-bash"># unit tests
$ docker exec -it nest yarn test

# e2e tests
$ docker exec -it nest yarn test:e2e

# test coverage
$ docker exec -it nest yarn test:cov</code></pre></div><h4 id="non-docker-1">Non-Docker</h4>
<div><pre class="line-numbers"><code class="language-bash"># unit tests
$ npm run test

# e2e tests
$ npm run test:e2e

# test coverage
$ npm run test:cov</code></pre></div><hr>
<h3 id="üí°-typedocs">üí° TypeDocs</h3>
<p>The documentation for this boilerplate can be found <a href="https://msanvarov.github.io/nest-rest-mongo-boilerplate/">on Github pages</a>.</p>
<p>The docs can be generated on-demand, simply, by typing <code>npm run typedocs</code>. This will produce a <strong>docs</strong> folder with the required front-end files and <strong>start hosting on localhost port 8080</strong>.</p>
<div><pre class="line-numbers"><code class="language-bash"># generate docs for code
$ npm run typedocs</code></pre></div><hr>
<h3 id="üìù-open-api">üìù Open API</h3>
<p>Out of the box, the web app comes with an <a href="https://swagger.io/specification/">open api specification</a>, that is used to describe RESTful APIs. Nest provides a <a href="https://docs.nestjs.com/recipes/swagger">dedicated module to work with it</a>.</p>
<p>The configuration for Swagger can be found at this <a href="https://github.com/msanvarov/nest-rest-mongo-boilerplate/tree/master/src/swagger">location</a>.</p>
<hr>
<h3 id="‚ú®-mongoose">‚ú® Mongoose</h3>
<p>Mongoose provides a straight-forward, schema-based solution to model your application data. It includes built-in type casting, validation, query building, business logic hooks and more, out of the box. Please view the <a href="https://mongoosejs.com">documentation</a> for further details.</p>
<p>The configuration for Mongoose can be found in the <a href="https://github.com/msanvarov/nest-rest-mongo-boilerplate/blob/master/src/modules/app/app.module.ts#L17">app module</a>.</p>
<hr>
<h3 id="üîä-logs">üîä Logs</h3>
<p>This boilerplate comes with a Winston module for logging, the configurations for Winston can be found in the <a href="https://github.com/msanvarov/nest-rest-mongo-boilerplate/blob/master/src/modules/app/app.module.ts#L27">app module</a>.</p>
<hr>
<h3 id="üë•-support">üë• Support</h3>
<p>Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you&#39;d like to join them, please <a href="https://docs.nestjs.com/support">read more here</a>.</p>
<hr>
<h2 id="license">License</h2>
<p>Nest is <a href="LICENSE">MIT licensed</a>.</p>
<p><a href="https://msanvarov.github.io/personal-portfolio/">Author</a></p>














                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 0;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'getting-started';
            var COMPODOC_CURRENT_PAGE_URL = 'index.html';
       </script>

       <script src="./js/libs/custom-elements.min.js"></script>
       <script src="./js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="./js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="./js/menu-wc.js" defer></script>

       <script src="./js/libs/bootstrap-native.js"></script>

       <script src="./js/libs/es6-shim.min.js"></script>
       <script src="./js/libs/EventDispatcher.js"></script>
       <script src="./js/libs/promise.min.js"></script>
       <script src="./js/libs/zepto.min.js"></script>

       <script src="./js/compodoc.js"></script>

       <script src="./js/tabs.js"></script>
       <script src="./js/menu.js"></script>
       <script src="./js/libs/clipboard.min.js"></script>
       <script src="./js/libs/prism.js"></script>
       <script src="./js/sourceCode.js"></script>
          <script src="./js/search/search.js"></script>
          <script src="./js/search/lunr.min.js"></script>
          <script src="./js/search/search-lunr.js"></script>
          <script src="./js/search/search_index.js"></script>
       <script src="./js/lazy-load-graphs.js"></script>


    </body>
</html>
